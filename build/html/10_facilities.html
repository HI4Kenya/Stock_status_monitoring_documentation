<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Facilities &mdash; Stock status management tool 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Stock status management tool 0.1 documentation" href="index.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>Stock status management tool 0.1 documentation</span></a></h1>
        <h2 class="heading"><span>Facilities</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="facilities">
<h1>Facilities<a class="headerlink" href="#facilities" title="Permalink to this headline">¶</a></h1>
<p>This chapter assumes that the reader is familiar with the general
principles explained in the <a class="reference internal" href="06_api.html"><em>Using the API - basic principles</em></a> chapter.</p>
<p>The MFL is not merely a &#8220;list&#8221; of facilities; it has rich APIs to manage their
life cycles and to support interaction with other healthcare systems. This
chapter concerns itself with what is arguably the &#8220;core&#8221; of the MFL system
- the maintenance of facility information. Facilities APIs fall into the
following groups:</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Function</th>
<th class="head">Resources / APIs</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Facility Information storage</td>
<td><ul class="first last simple">
<li>Facility</li>
<li>Facility Physical Addresses</li>
<li>Facility Contacts</li>
<li>Facility Units</li>
<li>Facility Services</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Facility Workflow / Life cycle</td>
<td><ul class="first last simple">
<li>Approval</li>
<li>Publishing ( synchronization )</li>
<li>Regulation</li>
<li>Upgrade</li>
<li>Downgrade</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>Facility ratings</td>
<td><ul class="first last simple">
<li>Facility service ratings</li>
<li>Facility ratings report</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Facility downloads</td>
<td><ul class="first last simple">
<li>Facility cover letters</li>
<li>Facility correction templates</li>
<li>Facility excel exports</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>Facility dashboard APIS</td>
<td><ul class="first last simple">
<li>Analysis by administrative units</li>
<li>Analysis by type</li>
<li>Analysis by owner and owner category</li>
<li>Analysis by regulator and regulation status</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>One of the things associated with facilities that are registered on the
Master Facilities List is a <strong>Master Facilities List ( MFL ) Code</strong>.</p>
<p>The MFL code is a unique number ( integral ) that is <em>sequential</em> and
<em>immutable</em>. The immutability is taken seriously - the MFL codes that
were issued under the first generation system will not be re-issued under
the second generation MFL system.</p>
<p class="last">Codes that are issued under MFL 2 will start at <cite>100000</cite>.</p>
</div>
<div class="section" id="facility-information-storage">
<h2>Facility information storage<a class="headerlink" href="#facility-information-storage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These APIs are the &#8220;heart&#8221; of the MFL system. A well-behaved front-end
should take an integrated approach, presenting output from these APIs
under one set of screens ( instead of five sets, one for each resource
type ).</p>
</div>
<div class="section" id="id1">
<h3>Facilities<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="listing-multiple-records">
<h4>Listing multiple records<a class="headerlink" href="#listing-multiple-records" title="Permalink to this headline">¶</a></h4>
<p>The facilities that are currently registered can be listed at
<tt class="docutils literal"><span class="pre">/api/facilities/facilities/</span></tt>.</p>
</div>
<div class="section" id="retrieving-a-single-record">
<h4>Retrieving a single record<a class="headerlink" href="#retrieving-a-single-record" title="Permalink to this headline">¶</a></h4>
<p>Each facility has a UUID <tt class="docutils literal"><span class="pre">id</span></tt>. A facility&#8217;s detail record can be listed
at <tt class="docutils literal"><span class="pre">/api/facilities/facilities/&lt;id&gt;/</span></tt>. For example: if a facility
record&#8217;s <tt class="docutils literal"><span class="pre">id</span></tt> is <tt class="docutils literal"><span class="pre">2927d31f-b1a0-4d17-93b0-ea648af7b9f0</span></tt>, the detail
URL for the facility record will be <tt class="docutils literal"><span class="pre">/api/facilities/facilities/2927d31f-b1a0-4d17-93b0-ea648af7b9f0/</span></tt>.</p>
</div>
<div class="section" id="filtering-and-search">
<h4>Filtering and search<a class="headerlink" href="#filtering-and-search" title="Permalink to this headline">¶</a></h4>
<p>Facilities - as listed at <tt class="docutils literal"><span class="pre">/api/facilities/facilities/</span></tt> can be filtered using
the following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Filter</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>This does a <em>case insensitive partial match</em> but accepts only one name to filter by e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?name=molo</span></tt>.</td>
</tr>
<tr class="row-odd"><td>code</td>
<td>Filter by <strong>one or more</strong> facility codes e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?code=15003,15002</span></tt>. The <tt class="docutils literal"><span class="pre">,</span></tt> is used to separate individual parameters. This does exact matches.</td>
</tr>
<tr class="row-even"><td>description</td>
<td>Similar to <tt class="docutils literal"><span class="pre">name</span></tt> but operating on descriptions e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?name=molo</span></tt></td>
</tr>
<tr class="row-odd"><td>facility_type</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">id``s</span> <span class="pre">of</span> <span class="pre">one</span> <span class="pre">or</span> <span class="pre">more</span> <span class="pre">facility</span> <span class="pre">types</span> <span class="pre">e.g</span> <span class="pre">``/api/facilities/facilities/?facility_type=f25ba517-3b8d-4692-ba7b-3524f6ec58e5,b2225473-08f1-4e86-a47a-0a61cf75e731</span></tt>. Facility types can be listed at <tt class="docutils literal"><span class="pre">/api/facilities/facility_types/</span></tt>.</td>
</tr>
<tr class="row-even"><td>operation_status</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">id</span></tt> of one or more operation statuses from <tt class="docutils literal"><span class="pre">/api/facilities/facility_status/</span></tt></td>
</tr>
<tr class="row-odd"><td>ward</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">id</span></tt> of wards ( from <tt class="docutils literal"><span class="pre">/api/common/wards/</span></tt> e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?ward=353404d7-02e6-422f-b64f-b1c7d0f1bcf0</span></tt> )</td>
</tr>
<tr class="row-even"><td>county</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">id</span></tt> of counties ( from <tt class="docutils literal"><span class="pre">/api/common/counties/</span></tt> e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?county=fa47afa2-a78a-421f-ad9f-55e6cbfc280c</span></tt> )</td>
</tr>
<tr class="row-odd"><td>constituency</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">id</span></tt> of constituencies ( from <tt class="docutils literal"><span class="pre">/api/common/constituencies/</span></tt> e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?constituencies=93280ce0-670f-4b96-a449-57d65f0dcace</span></tt> )</td>
</tr>
<tr class="row-even"><td>owner</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">id</span></tt> of one or more owners. Owners can be listed at <tt class="docutils literal"><span class="pre">/api/facilities/owners/</span></tt></td>
</tr>
<tr class="row-odd"><td>owner_type</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">id</span></tt> of one or more owner types. Owner types can be listed at <tt class="docutils literal"><span class="pre">/api/facilities/owner_types/</span></tt></td>
</tr>
<tr class="row-even"><td>officer_in_charge</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">id</span></tt> of one or more officers-in-charge. The officers can be listed at <tt class="docutils literal"><span class="pre">/api/facilities/officers/</span></tt></td>
</tr>
<tr class="row-odd"><td>number_of_beds</td>
<td>Filter by the number of beds, supplying one or more filter parameters e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?number_of_beds=20,21,22,23,24</span></tt></td>
</tr>
<tr class="row-even"><td>number_of_cots</td>
<td>Filter by the number of cots, supplying one ormore filter parameters e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?number_of_cots=10,11,12</span></tt></td>
</tr>
<tr class="row-odd"><td>open_whole_day</td>
<td>A boolean filter e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?open_whole_day=true</span></tt></td>
</tr>
<tr class="row-even"><td>open_whole_week</td>
<td>A boolean filter e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?open_whole_week=true</span></tt></td>
</tr>
<tr class="row-odd"><td>is_classified</td>
<td>A boolean filter that determines if a facility&#8217;s coordinates should be shown or not. The public front-end should omit classified facilities by default. i.e. publish those that can be listed with <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?is_classified=false</span></tt></td>
</tr>
<tr class="row-even"><td>is_published</td>
<td>A boolean filter that determines if a facility has been cleared for display on the public site. The public site should only display facilities that can be listed with <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?is_published=true</span></tt></td>
</tr>
<tr class="row-odd"><td>is_regulated</td>
<td>The facilities that are pending action from the regulators can be listed with <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?is_regulated=False</span></tt></td>
</tr>
</tbody>
</table>
<p>The following filters are common to <strong>all</strong> list endpoints in this API,
other than <tt class="docutils literal"><span class="pre">/api/users/</span></tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Filter</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>updated_before</td>
<td>The most recently updated facilities can be listed with a query similar to <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?updated_before=2015-05-09T08:57:48.094112Z</span></tt>. The datetime is in ISO 8601 format.</td>
</tr>
<tr class="row-odd"><td>created_before</td>
<td>Similar to <tt class="docutils literal"><span class="pre">updated_before</span></tt>, but operating on creation dates. Creation dates are not &#8220;touched&#8221; after the initial creation of the resource.</td>
</tr>
<tr class="row-even"><td>updated_after</td>
<td>Similar to <tt class="docutils literal"><span class="pre">updated_before</span></tt>, but returns records newer than the specified datetime</td>
</tr>
<tr class="row-odd"><td>created_after</td>
<td>Similar to <tt class="docutils literal"><span class="pre">updated_after</span></tt>, but works with creation dates.</td>
</tr>
<tr class="row-even"><td>updated_on</td>
<td>This is similar to the date filters above but performs <strong>exact matches</strong> on the update date.</td>
</tr>
<tr class="row-odd"><td>created_on</td>
<td>This is also performs exact matches.</td>
</tr>
<tr class="row-even"><td>is_active</td>
<td>For all resources in this server, the preferred way to &#8220;retire&#8221; records is to mark them as inactive. This allows the API client to request only active or only inactive records.</td>
</tr>
<tr class="row-odd"><td>search</td>
<td>Perform a full text search that looks through all fields. e.g <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?search=endebess</span></tt> gives back all facilities that have &#8220;endebess&#8221; anywhere in their name, description or attributes.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>These filters can be combined / chained.</p>
<p class="last">For example: <tt class="docutils literal"><span class="pre">/api/facilities/facilities/?ward=353404d7-02e6-422f-b64f-b1c7d0f1bcf0&amp;open_whole_day=true</span></tt></p>
</div>
</div>
<div class="section" id="adding-a-new-record">
<h4>Adding a new record<a class="headerlink" href="#adding-a-new-record" title="Permalink to this headline">¶</a></h4>
<p>The following are the important fields when adding a new facility:</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>The name of the faciity e.g &#8220;Musembe Dispensary (Lugari)&#8221;</td>
</tr>
<tr class="row-odd"><td>abbreviation</td>
<td>A shortened name</td>
</tr>
<tr class="row-even"><td>description</td>
<td>Free text that supplies any additional detail that is required</td>
</tr>
<tr class="row-odd"><td>location_desc</td>
<td>An explanation of the location, in &#8220;plain&#8221; language e.g &#8220;Eldoret - Webuye Highway (at Musembe Mkt junction)&#8221;</td>
</tr>
<tr class="row-even"><td>number_of_beds</td>
<td>The number of beds as per the facility&#8217;s license</td>
</tr>
<tr class="row-odd"><td>number_of_cots</td>
<td>The number of cots as per the facility&#8217;s license</td>
</tr>
<tr class="row-even"><td>open_whole_day</td>
<td><cite>true</cite> if the facility is a 24 hour operation</td>
</tr>
<tr class="row-odd"><td>open_whole_week</td>
<td><cite>true</cite> if the facility is a 7 day operation</td>
</tr>
<tr class="row-even"><td>facility_type</td>
<td>An <tt class="docutils literal"><span class="pre">id</span></tt>, obtained by listing <tt class="docutils literal"><span class="pre">/api/facilities/facility_types/</span></tt></td>
</tr>
<tr class="row-odd"><td>operation_status</td>
<td>An <tt class="docutils literal"><span class="pre">id</span></tt>, obtained from <tt class="docutils literal"><span class="pre">/api/facilities/facility_status/</span></tt>. This is the overall state of the facility e.g &#8220;Operational&#8221; or &#8220;Not Operational&#8221;</td>
</tr>
<tr class="row-even"><td>ward</td>
<td>An <tt class="docutils literal"><span class="pre">id</span></tt>, obtained from <tt class="docutils literal"><span class="pre">/api/common/wards/</span></tt>. Facilities are attached at the level of the smallest administrative area ( the ward ).</td>
</tr>
<tr class="row-odd"><td>owner</td>
<td>An <tt class="docutils literal"><span class="pre">id</span></tt>, obtained from <tt class="docutils literal"><span class="pre">/api/facilities/owners/</span></tt>.</td>
</tr>
<tr class="row-even"><td>officer_in_charge</td>
<td>An <tt class="docutils literal"><span class="pre">id</span></tt>, obtained from <tt class="docutils literal"><span class="pre">/api/facilities/officers/</span></tt></td>
</tr>
<tr class="row-odd"><td>physical_address</td>
<td>An <tt class="docutils literal"><span class="pre">id</span></tt>, obtained from <tt class="docutils literal"><span class="pre">/api/common/address/</span></tt></td>
</tr>
<tr class="row-even"><td>parent</td>
<td>Optional. If a facility is a &#8220;branch&#8221; of a larger facility, the <tt class="docutils literal"><span class="pre">id</span></tt> of the parent facility should be supplied here.</td>
</tr>
</tbody>
</table>
<p>The following example illustrates a valid <tt class="docutils literal"><span class="pre">POST</span></tt> payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Demo Facility&quot;</span><span class="p">,</span>
    <span class="s2">&quot;abbreviation&quot;</span><span class="o">:</span> <span class="s2">&quot;DEMOFAC&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;This is an example in the documentation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;location_desc&quot;</span><span class="o">:</span> <span class="s2">&quot;Planet: Mars&quot;</span><span class="p">,</span>
    <span class="s2">&quot;number_of_beds&quot;</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s2">&quot;number_of_cots&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;open_whole_day&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;open_whole_week&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;facility_type&quot;</span><span class="o">:</span> <span class="s2">&quot;db8f93ad-b558-405a-89b5-a0cdb318ee6e&quot;</span><span class="p">,</span>
    <span class="s2">&quot;operation_status&quot;</span><span class="o">:</span> <span class="s2">&quot;ee194a52-db9d-401c-a2ef-9c8225e501cd&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ward&quot;</span><span class="o">:</span> <span class="s2">&quot;a64d930d-883e-4b96-ba39-c792a1cd04f2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;owner&quot;</span><span class="o">:</span> <span class="s2">&quot;f4c7ca47-7ee6-4795-ac1c-a5d219e329ad&quot;</span><span class="p">,</span>
    <span class="s2">&quot;officer_in_charge&quot;</span><span class="o">:</span> <span class="s2">&quot;972c9c96-fe27-4803-b6f8-c933310e2f44&quot;</span><span class="p">,</span>
    <span class="s2">&quot;physical_address&quot;</span><span class="o">:</span> <span class="s2">&quot;88dde94b-dc42-4b13-b1cb-05eca047678c&quot;</span><span class="p">,</span>
    <span class="s2">&quot;parent&quot;</span><span class="o">:</span> <span class="kc">null</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A successful <tt class="docutils literal"><span class="pre">POST</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">201</span> <span class="pre">Created</span></tt> response. A
representation of the freshly created resource will be returned in the
response.</p>
</div>
<div class="section" id="updating-an-existing-record">
<h4>Updating an existing record<a class="headerlink" href="#updating-an-existing-record" title="Permalink to this headline">¶</a></h4>
<p>In order to update an existing record, <tt class="docutils literal"><span class="pre">PATCH</span></tt> the appropriate field from
the record&#8217;s detail view.</p>
<p>For example, if the facility that we created above got the <tt class="docutils literal"><span class="pre">id</span></tt> set to
<tt class="docutils literal"><span class="pre">e88f0c1a-e1e4-44ff-8db1-8c4135abb080</span></tt> ( this will be returned to the client
in the resource returned after successful creation ), we can change its
<tt class="docutils literal"><span class="pre">location_desc</span></tt> from &#8220;Planet: Mars&#8221; to &#8220;Planet: Venus&#8221; by sending a
<tt class="docutils literal"><span class="pre">PATCH</span></tt> to <tt class="docutils literal"><span class="pre">/api/facilities/facilities/e88f0c1a-e1e4-44ff-8db1-8c4135abb080/</span></tt> with the
following payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;location_desc&quot;</span><span class="o">:</span> <span class="s2">&quot;Planet: Venus&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A successful <tt class="docutils literal"><span class="pre">PATCH</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt> response and a
representation of the freshly updated resource will be returned.</p>
</div>
<div class="section" id="deleting-a-record">
<h4>Deleting a record<a class="headerlink" href="#deleting-a-record" title="Permalink to this headline">¶</a></h4>
<p>In order to delete the record that we just created, send a <tt class="docutils literal"><span class="pre">DELETE</span></tt> with an
empty payload to the detail URL i.e. to <tt class="docutils literal"><span class="pre">/api/facilities/facilities/e88f0c1a-e1e4-44ff-8db1-8c4135abb080/</span></tt> in the example above.</p>
<p>A successful <tt class="docutils literal"><span class="pre">DELETE</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">204</span> <span class="pre">NO</span> <span class="pre">CONTENT</span></tt> response.</p>
</div>
</div>
<div class="section" id="physical-addresses">
<h3>Physical addresses<a class="headerlink" href="#physical-addresses" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id2">
<h4>Listing multiple records<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>The physical addresses known to the system can be listed at
<tt class="docutils literal"><span class="pre">/api/common/address/</span></tt>.</p>
<p>In addition to the common filters that are already explained above,
physical addresses have the following extra filters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>town</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">id</span></tt> of a town. Towns can be listed at <tt class="docutils literal"><span class="pre">/api/common/towns/</span></tt> e.g <tt class="docutils literal"><span class="pre">/api/common/address/?town=b2af0361-c924-4ba2-9bc6-82333fc0a26f</span></tt></td>
</tr>
<tr class="row-odd"><td>postal_code</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">postal_code</span></tt> e.g <tt class="docutils literal"><span class="pre">/api/common/address/?postal_code=00100</span></tt></td>
</tr>
<tr class="row-even"><td>address</td>
<td>Filter by the actual text of the address itself e.g <tt class="docutils literal"><span class="pre">/api/common/address/?address=P.O.%20Box%201</span></tt></td>
</tr>
<tr class="row-odd"><td>nearest_landmark</td>
<td>Filter by the contents of the <tt class="docutils literal"><span class="pre">nearest_landmark</span></tt> field e.g <tt class="docutils literal"><span class="pre">/api/common/address/?nearest_landmark=kicc</span></tt></td>
</tr>
<tr class="row-even"><td>plot_number</td>
<td>Filter by the <tt class="docutils literal"><span class="pre">plot_number</span></tt> field e.g <tt class="docutils literal"><span class="pre">/api/common/address/?plot_number=940</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h4>Retrieving a single record<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>The detail endpoint is <tt class="docutils literal"><span class="pre">/api/common/address/&lt;id&gt;/</span></tt> e.g
<tt class="docutils literal"><span class="pre">/api/common/address/20d01a89-f6b5-4a4d-b788-32182d427c18/</span></tt> for the address
whose <tt class="docutils literal"><span class="pre">id</span></tt> is <tt class="docutils literal"><span class="pre">20d01a89-f6b5-4a4d-b788-32182d427c18</span></tt>.</p>
</div>
<div class="section" id="id4">
<h4>Adding a new record<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>Supply the following fields:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>postal_code</td>
<td>A valid postal code e.g &#8220;00100&#8221;</td>
</tr>
<tr class="row-odd"><td>address</td>
<td>An address e.g &#8220;No. 11A, Kabarnet Court, off Kabarnet Road&#8221; or &#8220;P.O. Box 5980&#8221;</td>
</tr>
<tr class="row-even"><td>nearest_landmark</td>
<td>Free text, left to the discretion of the person creating the record</td>
</tr>
<tr class="row-odd"><td>plot_number</td>
<td>Free text, left to the discretion of the person entering the record</td>
</tr>
<tr class="row-even"><td>town</td>
<td>The <tt class="docutils literal"><span class="pre">id</span></tt> of a town, as listed at <tt class="docutils literal"><span class="pre">/api/common/towns/</span></tt></td>
</tr>
</tbody>
</table>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;00100&quot;</span><span class="p">,</span>
    <span class="s2">&quot;address&quot;</span><span class="o">:</span> <span class="s2">&quot;No. 11A, Kabarnet Court, off Kabarnet Road&quot;</span><span class="p">,</span>
    <span class="s2">&quot;nearest_landmark&quot;</span><span class="o">:</span> <span class="s2">&quot;Kingdom Business Centre&quot;</span><span class="p">,</span>
    <span class="s2">&quot;plot_number&quot;</span><span class="o">:</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span>
    <span class="s2">&quot;town&quot;</span><span class="o">:</span> <span class="s2">&quot;b2af0361-c924-4ba2-9bc6-82333fc0a26f&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A successful <tt class="docutils literal"><span class="pre">POST</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">201</span> <span class="pre">Created</span></tt> response. A
representation of the freshly created resource will be returned in the
response.</p>
</div>
<div class="section" id="id5">
<h4>Updating an existing record<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">PATCH</span></tt> the detail endpoint above e.g to set the <tt class="docutils literal"><span class="pre">plot_number</span></tt> for the
example record above, send the following <tt class="docutils literal"><span class="pre">PATCH</span></tt> payload to
<tt class="docutils literal"><span class="pre">/api/common/address/20d01a89-f6b5-4a4d-b788-32182d427c18/</span></tt>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;plot_number&quot;</span><span class="o">:</span> <span class="s2">&quot;250&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A successful <tt class="docutils literal"><span class="pre">PATCH</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt> response. A
representation of the updated resource will be returned in the
response.</p>
</div>
<div class="section" id="id6">
<h4>Deleting a record<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>Send a <tt class="docutils literal"><span class="pre">DELETE</span></tt> request to the detail endpoint. In the example above,
the <tt class="docutils literal"><span class="pre">DELETE</span></tt> would be sent to <tt class="docutils literal"><span class="pre">/api/common/address/20d01a89-f6b5-4a4d-b788-32182d427c18/</span></tt>.</p>
<p>A successful <tt class="docutils literal"><span class="pre">DELETE</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">204</span> <span class="pre">NO</span> <span class="pre">CONTENT</span></tt> response.</p>
</div>
</div>
<div class="section" id="facility-contacts">
<h3>Facility contacts<a class="headerlink" href="#facility-contacts" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id7">
<h4>Listing multiple records<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>Facility contacts can be listed at <tt class="docutils literal"><span class="pre">/api/facilities/contacts/</span></tt>.</p>
<p>In addition to the common contacts that are already explained above,
facility contacts have the following extra fields:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>facility</td>
<td>The <tt class="docutils literal"><span class="pre">id</span></tt> of the relevant facility, as listed at <tt class="docutils literal"><span class="pre">/api/facilities/facilities/</span></tt> e.g <tt class="docutils literal"><span class="pre">/api/facilities/contacts/?facility=faaefb75-dba4-4564-8acb-6b947685de24</span></tt></td>
</tr>
<tr class="row-odd"><td>contact</td>
<td>The <tt class="docutils literal"><span class="pre">id</span></tt> of a contact, as listed at <tt class="docutils literal"><span class="pre">/api/common/contacts/</span></tt> e.g <tt class="docutils literal"><span class="pre">/api/facilities/contacts/?contact=2f5fe4c2-0371-4ba0-ba31-79d997d71c6a</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id8">
<h4>Retrieving a single record<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>The detail endpoint is <tt class="docutils literal"><span class="pre">/api/facilities/contacts/&lt;id&gt;/</span></tt>. For example, the
detail URL for the facility contact whose <tt class="docutils literal"><span class="pre">id</span></tt> is
<tt class="docutils literal"><span class="pre">9641f588-a5c0-4c0d-ad13-cfcf98a2fb7</span></tt> is
<tt class="docutils literal"><span class="pre">/api/facilities/contacts/9641f588-a5c0-4c0d-ad13-cfcf98a2fb7</span></tt>.</p>
</div>
<div class="section" id="id9">
<h4>Adding a new record<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>The only required fields are the <tt class="docutils literal"><span class="pre">facility</span></tt> and <tt class="docutils literal"><span class="pre">contact</span></tt> ( as documented
above ).</p>
<p>The following example is a valid <tt class="docutils literal"><span class="pre">POST</span></tt> payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;facility&quot;</span><span class="o">:</span> <span class="s2">&quot;faaefb75-dba4-4564-8acb-6b947685de24&quot;</span><span class="p">,</span>
    <span class="s2">&quot;contact&quot;</span><span class="o">:</span> <span class="s2">&quot;2f5fe4c2-0371-4ba0-ba31-79d997d71c6a&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A successful <tt class="docutils literal"><span class="pre">POST</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">201</span> <span class="pre">Created</span></tt> response. A
representation of the freshly created resource will be returned in the
response.</p>
</div>
<div class="section" id="id10">
<h4>Updating an existing record<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">PATCH</span></tt> the detail endpoint with the new values e.g to change the contact in
the record above, a valid <tt class="docutils literal"><span class="pre">PATCH</span></tt> payload could be:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;contact&quot;</span><span class="o">:</span> <span class="s2">&quot;516f64b5-a12c-4323-b918-a5512b4baf6a&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A successful <tt class="docutils literal"><span class="pre">PATCH</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt> response. A
representation of the updated resource will be returned in the
response.</p>
</div>
<div class="section" id="id11">
<h4>Deleting a record<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>Send a <tt class="docutils literal"><span class="pre">DELETE</span></tt> request to the detail endpoint.</p>
<p>A successful <tt class="docutils literal"><span class="pre">DELETE</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">204</span> <span class="pre">NO</span> <span class="pre">CONTENT</span></tt> response.</p>
</div>
</div>
<div class="section" id="facility-units">
<h3>Facility units<a class="headerlink" href="#facility-units" title="Permalink to this headline">¶</a></h3>
<p>A facility may contain within it multiple semi-independent units e.g a
pharmacy, a lab and a radiology unit.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These units may fall under the scope of different regulators. This API
server does not currently handle that.</p>
</div>
<div class="section" id="id12">
<h4>Listing multiple records<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>Facility units can be listed via a <tt class="docutils literal"><span class="pre">GET</span></tt> to <tt class="docutils literal"><span class="pre">/api/facilities/facility_units/</span></tt>.</p>
<p>In addition to the common filters, facility units can be filtered by the
following fields:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>facility</td>
<td>The <tt class="docutils literal"><span class="pre">id</span></tt> of the facility, as listed at <tt class="docutils literal"><span class="pre">/api/facilities/facilities/</span></tt> e.g <tt class="docutils literal"><span class="pre">/api/facilities/facility_units/?facility=faaefb75-dba4-4564-8acb-6b947685de24</span></tt></td>
</tr>
<tr class="row-odd"><td>name</td>
<td>The name of the facility unit e.g <tt class="docutils literal"><span class="pre">/api/facilities/facility_units/?facility=faaefb75-dba4-4564-8acb-6b947685de24&amp;name=pharmacy</span></tt></td>
</tr>
<tr class="row-even"><td>description</td>
<td>The description of the facility unit e.g <tt class="docutils literal"><span class="pre">/api/facilities/facility_units/?facility=faaefb75-dba4-4564-8acb-6b947685de24&amp;description=hospital%20pharmacy</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id13">
<h4>Retrieving a single record<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>A single facility unit record can be retrieved at its detail endpoint i.e</dt>
<dd><tt class="docutils literal"><span class="pre">/api/facilities/facility_units/&lt;id&gt;/</span></tt> e.g
<tt class="docutils literal"><span class="pre">/api/facilities/facility_units/1fcc5c30-9170-4c9d-8d05-9695ba81a08c/</span></tt>.</dd>
</dl>
</div>
<div class="section" id="id14">
<h4>Adding a new record<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p>When adding a new facility unit, the fields of interest are the <tt class="docutils literal"><span class="pre">name</span></tt>,
<tt class="docutils literal"><span class="pre">description</span></tt> and <tt class="docutils literal"><span class="pre">facility</span></tt>.</p>
<p>The following is a valid <tt class="docutils literal"><span class="pre">POST</span></tt> payload for <tt class="docutils literal"><span class="pre">/api/facilities/facility_units/</span></tt>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Pharmacy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Hospital Pharmacy&quot;</span><span class="p">,</span>
    <span class="s2">&quot;facility&quot;</span><span class="o">:</span> <span class="s2">&quot;faaefb75-dba4-4564-8acb-6b947685de24&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A successful <tt class="docutils literal"><span class="pre">POST</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">201</span> <span class="pre">Created</span></tt> response. A
representation of the freshly created resource will be returned in the
response.</p>
</div>
<div class="section" id="id15">
<h4>Updating an existing record<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p>A <tt class="docutils literal"><span class="pre">PATCH</span></tt> to the detail endpoint will update the relevant field(s):
For example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Community Pharmacy&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A successful <tt class="docutils literal"><span class="pre">PATCH</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt> response. A
representation of the updated resource will be returned in the
response.</p>
</div>
<div class="section" id="id16">
<h4>Deleting a record<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<p>Send a <tt class="docutils literal"><span class="pre">DELETE</span></tt> request to the detail endpoint.</p>
<p>A successful <tt class="docutils literal"><span class="pre">DELETE</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">204</span> <span class="pre">NO</span> <span class="pre">CONTENT</span></tt> response.</p>
</div>
</div>
<div class="section" id="facility-services">
<h3>Facility services<a class="headerlink" href="#facility-services" title="Permalink to this headline">¶</a></h3>
<p>These APIs link facilities to <a class="reference internal" href="09_services.html"><em>The service catalog</em></a>.</p>
<div class="section" id="id17">
<h4>Listing multiple records<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<p>The currently registered facility services can be listed via <tt class="docutils literal"><span class="pre">GET</span></tt> to
<tt class="docutils literal"><span class="pre">/api/facilities/facility_services/</span></tt>.</p>
<p>In addition to the standard filters, facility services have the following
additional filters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>facility</td>
<td><tt class="docutils literal"><span class="pre">id</span></tt> of a facility, as obtained from <tt class="docutils literal"><span class="pre">/api/facilities/facilities/</span></tt></td>
</tr>
<tr class="row-odd"><td>selected_option</td>
<td><tt class="docutils literal"><span class="pre">id</span></tt> of a service catalog service option, as obtained from <tt class="docutils literal"><span class="pre">/api/facilities/service_options/</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id18">
<h4>Retrieving a single record<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<p>A facility service record can be retrieved at
<tt class="docutils literal"><span class="pre">/api/facilities/facility_services/&lt;id&gt;/</span></tt> e.g
<tt class="docutils literal"><span class="pre">/api/facilities/facility_services/df6bc639-1d9b-49f8-8f95-51e6de9c93e2/</span></tt>
for the facility service whose <tt class="docutils literal"><span class="pre">id</span></tt> is <tt class="docutils literal"><span class="pre">df6bc639-1d9b-49f8-8f95-51e6de9c93e2</span></tt>.</p>
</div>
<div class="section" id="id19">
<h4>Adding a new record<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<p>To  associate a facility with a service, the required fields are <tt class="docutils literal"><span class="pre">facility</span></tt>
and <tt class="docutils literal"><span class="pre">selected_option</span></tt>.</p>
<p>The following is an example <tt class="docutils literal"><span class="pre">POST</span></tt> payload:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;f465cb89-995c-4004-9f32-1d97fa6d0eb2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;option&quot;</span><span class="o">:</span> <span class="s2">&quot;f465cb89-995c-4004-9f32-1d97fa6d0eb2&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A successful <tt class="docutils literal"><span class="pre">POST</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">201</span> <span class="pre">Created</span></tt> response. A
representation of the freshly created resource will be returned in the
response.</p>
</div>
<div class="section" id="id20">
<h4>Updating an existing record<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<p>Issue a <tt class="docutils literal"><span class="pre">PATCH</span></tt> to the detail endpoint with the new value. For example, to
change the option the example record we created above, the following payload
could be sent via <tt class="docutils literal"><span class="pre">PATCH</span></tt> to
<tt class="docutils literal"><span class="pre">/api/facilities/facility_services/df6bc639-1d9b-49f8-8f95-51e6de9c93e2/</span></tt>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;option&quot;</span><span class="o">:</span> <span class="s2">&quot;7dde4be8-1c1e-43ce-8569-eebb63bcb329&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A successful <tt class="docutils literal"><span class="pre">PATCH</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt> response. A
representation of the updated resource will be returned in the
response.</p>
</div>
<div class="section" id="id21">
<h4>Deleting a record<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<p>Issue a <tt class="docutils literal"><span class="pre">DELETE</span></tt> to the detail endpoint.</p>
<p>A successful <tt class="docutils literal"><span class="pre">DELETE</span></tt> will get back a <tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">204</span> <span class="pre">NO</span> <span class="pre">CONTENT</span></tt> response.</p>
</div>
</div>
</div>
<div class="section" id="facility-workflows">
<h2>Facility workflows<a class="headerlink" href="#facility-workflows" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These five workflows are the day-to-day operations performed on the MFL
system. A well behaved front-end should integrate them into the facility
information screens that handle the facility information services mentioned
above, rather than give each of these its own set of screens.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These workflows have multiple interactions with the role based access
control setup.</p>
</div>
<div class="section" id="the-facility-publishing-workflow">
<h3>The facility &#8220;publishing&#8221; workflow<a class="headerlink" href="#the-facility-publishing-workflow" title="Permalink to this headline">¶</a></h3>
<p>The first generation MFL system had a notion of &#8220;synchronizing&#8221; facility
records to the &#8220;public site&#8221;. This notion arose beceause the &#8220;public&#8221; MFL
system was a separate system.</p>
<p>This API does away with that notion. All applications - admin or public, web
or mobile - share the same API. Facilities that should be seen in the public
API have <tt class="docutils literal"><span class="pre">is_published</span></tt> set to <tt class="docutils literal"><span class="pre">true</span></tt> and <tt class="docutils literal"><span class="pre">is_classified</span></tt> set to
<tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When <tt class="docutils literal"><span class="pre">is_classified</span></tt> is <tt class="docutils literal"><span class="pre">true</span></tt>, a user accessing the public site will
need to be logged in with an account that has a the
<tt class="docutils literal"><span class="pre">view_classified_facilities</span></tt> permission.</p>
</div>
<p>To &#8220;publish&#8221; a facility, simply <tt class="docutils literal"><span class="pre">PATCH</span></tt> the facility&#8217;s detail URL and set
<tt class="docutils literal"><span class="pre">is_published</span></tt> to <tt class="docutils literal"><span class="pre">true</span></tt>. Newly created facilities are not published by
default.</p>
<p>To &#8220;classify&#8221; a facility, <tt class="docutils literal"><span class="pre">PATCH</span></tt> its detail endpoint with <tt class="docutils literal"><span class="pre">is_classified</span></tt>
set to <tt class="docutils literal"><span class="pre">true</span></tt>. A facility is not classified by default.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The public user interface should add an <tt class="docutils literal"><span class="pre">is_published=true</span></tt> filter to
every request made to the facilities endpoints. For an unauthenticated
user, it should also append <tt class="docutils literal"><span class="pre">is_classified=false</span></tt> to every call to the
facilities list endpoint.</p>
<p class="last">The administration user interface should implement role based access
control, limiting publishing to users with the <tt class="docutils literal"><span class="pre">publish_facilities</span></tt>
permission.</p>
</div>
</div>
</div>
<div class="section" id="facility-ratings">
<h2>Facility ratings<a class="headerlink" href="#facility-ratings" title="Permalink to this headline">¶</a></h2>
<p>Ratings are scores given to a facility&#8217;s services. One facility service can be rated by multiple users.
One user, can rate multiple facility services.</p>
<p>The scores given to a service range from 1 to 5, with 1 being the lowest score
and 5 being the highest score.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The facility ratings APIs will be used by both the public and
administration user interfaces. The public interface&#8217;s concern is to
facilitate ratings by the general public. The admninistration interface
will present read-only summary information.</p>
</div>
<div class="section" id="facility-service-ratings">
<h3>Facility service ratings<a class="headerlink" href="#facility-service-ratings" title="Permalink to this headline">¶</a></h3>
<p>To rate a facility service, simply make a <tt class="docutils literal"><span class="pre">POST</span></tt> to <tt class="docutils literal"><span class="pre">api/facilities/facility_service_ratings/</span></tt> with the
facility_service&#8217;s <tt class="docutils literal"><span class="pre">id</span></tt> and the score given. For example,</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;facility_service&quot;</span><span class="o">:</span> <span class="s2">&quot;80613650-f765-4032-a9d3-bb0fc9cc37cc&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rating&quot;</span><span class="o">:</span> <span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="facility-rating-reports">
<h3>Facility rating reports<a class="headerlink" href="#facility-rating-reports" title="Permalink to this headline">¶</a></h3>
<p>The rating reports available include:</p>
<ol class="arabic simple">
<li>number of users with specific rating/score</li>
<li>sorting of facilities by average score</li>
<li>sorting of facility services by average score</li>
<li>sorting of facility services in a facility by average score</li>
</ol>
</div>
</div>
<div class="section" id="facility-downloads">
<h2>Facility downloads<a class="headerlink" href="#facility-downloads" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some of these downloads e.g the facility correction template are there for
historical reasons. A better approach would involve the use of mobile
interfaces ( supported by this server&#8217;s APIs ) to facilitate data
collection and data updates in the field.</p>
</div>
<div class="section" id="facility-cover-letters">
<h3>Facility cover letters<a class="headerlink" href="#facility-cover-letters" title="Permalink to this headline">¶</a></h3>
<p>To <strong>view</strong> a facilities cover letter:</p>
<p><tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">api/facilities/facility_cover_report/&lt;facility_id&gt;/</span></tt></p>
<p>To get the cover letter in PDF:
<tt class="docutils literal"><span class="pre">GET</span> <span class="pre">the</span> <span class="pre">URL</span> <span class="pre">``api/common/dowload_pdf/?file_url=api/facilities/facility_cover_report/&lt;facility_id&gt;/&amp;file_name=&lt;file_name&gt;</span></tt></p>
</div>
<div class="section" id="facility-correction-templates">
<h3>Facility correction templates<a class="headerlink" href="#facility-correction-templates" title="Permalink to this headline">¶</a></h3>
<p>To view a facility&#8217;s correction template:</p>
<p><tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">api/facilities/facility_correction_template/&lt;id&gt;/</span></tt></p>
<p>To get a PDF of the correction template:
<tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">api/common/dowload_pdf/?file_url=api/facilities/facility_correction_template/&lt;facility_id&gt;/&amp;file_name=&lt;file_name&gt;</span></tt></p>
</div>
<div class="section" id="facilty-inspection-report">
<h3>Facilty Inspection Report<a class="headerlink" href="#facilty-inspection-report" title="Permalink to this headline">¶</a></h3>
<p>To view a facility&#8217;s inspection report:
<tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">api/facilities/facility_inspection_report/&lt;facility_id&gt;/</span></tt></p>
<p>To get a PDF of the inspection report:
<tt class="docutils literal"><span class="pre">GET</span></tt> <tt class="docutils literal"><span class="pre">api/common/dowload_pdf/?file_url=api/facilities/facility_inspection_report/&lt;facility_id&gt;/&amp;file_name=&lt;file_name&gt;</span></tt></p>
</div>
<div class="section" id="facility-excel-reports">
<h3>Facility Excel reports<a class="headerlink" href="#facility-excel-reports" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The authors of this API treated Excel and CSV output as simply <strong>one more
format that data can be exported into</strong>. Excel and CSV data comes from the
same serializers that produce the standard API JSON and XML output. This
has two positive effects:</p>
<blockquote>
<div><ul class="simple">
<li>it can use all the available filters</li>
<li>every list API endpoint ( not just the facilities list API endpoint ) can produce CSV and Excel</li>
</ul>
</div></blockquote>
<p class="last">e.g. to get an excel file of facilities:
<tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">api/facilities/facilities/?format=excel</span></tt></p>
</div>
</div>
<div class="section" id="facility-dashboard-apis">
<h3>Facility dashboard APIs<a class="headerlink" href="#facility-dashboard-apis" title="Permalink to this headline">¶</a></h3>
<p>This API is accesbile by administrators at both the county and the National level.
The dashboard API does a high level analysis of different aspects of the facilities.
Currently, it supports analysis of facilities by owners, administrative units,
facility types, facility owner types and analysis by time created.</p>
<p>To get the analyzed data:
<tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">api/facilities/dashboard/</span></tt>.
The data that the endpoint responds with is dependent upon the priviledges of the user logged in.</p>
<p>For a <strong>National user</strong>, the following response is expected</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;owners_summary&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;State Coorporation&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">1203</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Private Enterprise (Institution)&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;NOT IN LIST&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Humanitarian Agencies&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">179</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Private Practice - Unspecified&quot;</span>
        <span class="p">},</span>

    <span class="p">],</span>
    <span class="s2">&quot;recently_created&quot;</span><span class="o">:</span> <span class="mi">8361</span><span class="p">,</span>
    <span class="s2">&quot;county_summary&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">784</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;NAIROBI&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">392</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;MERU&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">379</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;NAKURU&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">363</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KITUI&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">358</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;NYERI&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">333</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KIAMBU&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">267</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KAJIADO&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">256</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;MOMBASA&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">243</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;MACHAKOS&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">233</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KILIFI&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;total_facilities&quot;</span><span class="o">:</span> <span class="mi">8361</span><span class="p">,</span>
    <span class="s2">&quot;status_summary&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Facility_Gazette_By_ID&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;PENDING&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Not-Operational&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">8361</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;OPERATIONAL&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Licensing&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Registration&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Gazettment&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;owner_types&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Other&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">268</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Non-Governmental Organizations&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">3226</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Private Institutions and Private Practice&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">853</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Faith Based Organization&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">356</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Other Public Institution&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">3658</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Ministry of Health&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;constituencies_summary&quot;</span><span class="o">:</span> <span class="p">[],</span>
    <span class="s2">&quot;types_summary&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">119</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;District Hospital&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">901</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Health Centre&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">3808</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Dispensary&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For a <strong>County user</strong> (Mombasa County in this case), the following response is expected</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;owners_summary&quot;</span><span class="o">:</span> <span class="p">[</span>

        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Local Authority T Fund&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">33</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Community Development Fund&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">78</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Company Medical Service&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">265</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Non-Governmental Organizations&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">225</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Other Faith Based&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Supreme Council for Kenya Muslims&quot;</span>
        <span class="p">},</span>

    <span class="p">],</span>
    <span class="s2">&quot;owner_types&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">189</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Private Institutions and Private Practice&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Faith Based Organization&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">27</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Other Public Institution&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">23</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Ministry of Health&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;constituencies_summary&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">71</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;MVITA&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">49</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;LIKONI&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">46</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;NYALI&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">44</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;CHANGAMWE&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">25</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;KISAUNI&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">21</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;JOMVU&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;types_summary&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">2735</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Medical Clinic&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">196</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Other Hospital&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">119</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Sub-District Hospital&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">172</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Nursing Home&quot;</span>
        <span class="p">}</span>

    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="facility-types">
<h1>Facility types<a class="headerlink" href="#facility-types" title="Permalink to this headline">¶</a></h1>
<p>There are many types of facilities ranging from health centers,
hospitals, dispensaries, national hospitals etc.</p>
<p>Facility types form the basis of upgrading and downgrading of facilities.</p>
<p>A facility type has five distinct fields:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>id</td>
<td>The primary key of the facility type</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>The name of the facility type e.g HEALTH_CENTER</td>
</tr>
<tr class="row-even"><td>sub-division</td>
<td>A sub-division of the facility type e.g A hospitla has got
several sub divisions e.g District Hospital of Provincial
Hospital</td>
</tr>
<tr class="row-odd"><td>preceeding</td>
<td>A facility type that comes before the type e.g a Provincial
Hospital comes before a National Hospital</td>
</tr>
</tbody>
</table>
<div class="section" id="creating-a-facility-type">
<h2>Creating A facility type<a class="headerlink" href="#creating-a-facility-type" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">POST</span></tt> to <tt class="docutils literal"><span class="pre">api/facilities/facility_types/</span></tt> a payload similar to the one below</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Hospital&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sub_division&quot;</span><span class="o">:</span> <span class="s2">&quot;Provincial Hospital&quot;</span><span class="p">,</span>
    <span class="s2">&quot;preceding&quot;</span><span class="o">:</span> <span class="s2">&quot;950047f7-dae4-4803-9818-9886004daaf1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Expected Response Code:</dt>
<dd><tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">201</span> <span class="pre">CREATED</span></tt></dd>
</dl>
<p>Expected sample data:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;11494347-f40c-4fbb-8632-cc1f35fe1fc9&quot;</span><span class="p">,</span>
    <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T14:38:03.298142Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T14:38:03.298162Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;deleted&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;active&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;search&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Hospital&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sub_division&quot;</span><span class="o">:</span> <span class="s2">&quot;Provincial Hospital&quot;</span><span class="p">,</span>
    <span class="s2">&quot;created_by&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;updated_by&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;preceding&quot;</span><span class="o">:</span> <span class="s2">&quot;950047f7-dae4-4803-9818-9886004daaf1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="listing-facillity-types">
<h2>Listing Facillity types<a class="headerlink" href="#listing-facillity-types" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">api/facilities/facility_types/</span></tt></p>
<p>Sample Response data:</p>
<div class="highlight-javascript"><div class="highlight"><pre>    <span class="p">{</span>
        <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">27</span><span class="p">,</span>
        <span class="s2">&quot;next&quot;</span><span class="o">:</span> <span class="s2">&quot;http://localhost:8000/api/facilities/facility_types/?page=2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;previous&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="s2">&quot;results&quot;</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;11494347-f40c-4fbb-8632-cc1f35fe1fc9&quot;</span><span class="p">,</span>
                <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T14:38:03.298142Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T14:38:03.298162Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;deleted&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="s2">&quot;active&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="s2">&quot;search&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Hospital&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sub_division&quot;</span><span class="o">:</span> <span class="s2">&quot;Provincial Hospital&quot;</span><span class="p">,</span>
                <span class="s2">&quot;created_by&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;updated_by&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;preceding&quot;</span><span class="o">:</span> <span class="s2">&quot;950047f7-dae4-4803-9818-9886004daaf1&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;950047f7-dae4-4803-9818-9886004daaf1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-15T13:45:13.592372Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-15T13:45:13.592404Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;deleted&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="s2">&quot;active&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="s2">&quot;search&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;District Hospital&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sub_division&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
                <span class="s2">&quot;created_by&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;updated_by&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;preceding&quot;</span><span class="o">:</span> <span class="kc">null</span>
            <span class="p">}</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Expected Response code:</dt>
<dd><tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt></dd>
</dl>
</div>
<div class="section" id="retrieving-a-facility-type">
<h2>Retrieving a facility type<a class="headerlink" href="#retrieving-a-facility-type" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">api/facilities/facility_types/&lt;id&gt;/</span></tt></p>
<p>For example to get the details of a facility type whose is
<tt class="docutils literal"><span class="pre">950047f7-dae4-4803-9818-9886004daaf1</span></tt>  do a <tt class="docutils literal"><span class="pre">GET</span></tt> to the URL
<tt class="docutils literal"><span class="pre">api/facilities/facility_types/950047f7-dae4-4803-9818-9886004daaf1/</span></tt></p>
<p>Sample Response data:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;950047f7-dae4-4803-9818-9886004daaf1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-15T13:45:13.592372Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-15T13:45:13.592404Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;deleted&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;active&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;search&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;District Hospital&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sub_division&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;created_by&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;updated_by&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;preceding&quot;</span><span class="o">:</span> <span class="kc">null</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Expected Response code</dt>
<dd><tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt></dd>
</dl>
</div>
<div class="section" id="updating-facility-types">
<h2>Updating Facility types<a class="headerlink" href="#updating-facility-types" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">PATCH</span></tt> the URL <tt class="docutils literal"><span class="pre">api/facilities/facility_types/&lt;id&gt;/</span></tt> with a payload
containing the fields to be edited. For example to update a facility type&#8217;s
name whose id is 950047f7-dae4-4803-9818-9886004daaf1 do a <tt class="docutils literal"><span class="pre">PATCH</span></tt> to the URL
<tt class="docutils literal"><span class="pre">api/facilities/facility_types/950047f7-dae4-4803-9818-9886004daaf1/</span></tt>
with a  payload similar to the one below</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;District Hospital Edited&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sample Expected Response data:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;950047f7-dae4-4803-9818-9886004daaf1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-15T13:45:13.592372Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-15T13:45:13.592404Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;deleted&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;active&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;search&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;District Hospital Edited&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sub_division&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;created_by&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;updated_by&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;preceding&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Expected Response Code:</dt>
<dd><tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt></dd>
</dl>
</div>
</div>
<div class="section" id="facility-upgrades-and-downgrades">
<h1>Facility Upgrades and Downgrades<a class="headerlink" href="#facility-upgrades-and-downgrades" title="Permalink to this headline">¶</a></h1>
<p>Upgrading or downgrading a facility is as easy as changing the
facility type of a facility to another type. The person doing this should
have the sufficient permssions to do so.
This is however a two step process. The First step involves making the upgrade
or the downgrade and the second involves confirming the upgrade or the
downgrade.</p>
<div class="section" id="upgrading-downgrading-a-facility-first-step">
<h2>Upgrading/Downgrading a Facility (First Step)<a class="headerlink" href="#upgrading-downgrading-a-facility-first-step" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">POST</span></tt> to <tt class="docutils literal"><span class="pre">api/facilities/facility_upgrade/</span></tt> a payload similar to the one
shown below</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;reason&quot;</span><span class="o">:</span> <span class="s2">&quot;A good reason for the upgrade&quot;</span><span class="p">,</span>
    <span class="s2">&quot;facility&quot;</span><span class="o">:</span> <span class="s2">&quot;cc585b49-dc42-47a3-a08a-7f2c39633393&quot;</span><span class="p">,</span> <span class="c1">// id of the facility</span>
    <span class="s2">&quot;facility_type&quot;</span><span class="o">:</span> <span class="s2">&quot;57a0351b-accd-4ccf-b19f-38920ea78e75&quot;</span> <span class="c1">// id of the facility type</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sample Response Data:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;70610b2b-ddd8-49b4-8594-52c236a834d2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T15:37:56.240505Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T15:37:56.240522Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;deleted&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;active&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;search&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;reason&quot;</span><span class="o">:</span> <span class="s2">&quot;A good reason for the upgrade&quot;</span><span class="p">,</span>
    <span class="s2">&quot;is_confirmed&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;is_cancelled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;created_by&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;updated_by&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;facility&quot;</span><span class="o">:</span> <span class="s2">&quot;cc585b49-dc42-47a3-a08a-7f2c39633393&quot;</span><span class="p">,</span>
    <span class="s2">&quot;facility_type&quot;</span><span class="o">:</span> <span class="s2">&quot;57a0351b-accd-4ccf-b19f-38920ea78e75&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Expected Response Code:</dt>
<dd><tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">201</span> <span class="pre">CREATED</span></tt></dd>
</dl>
</div>
<div class="section" id="confirming-upgrade-or-downgrade-second-step">
<h2>Confirming Upgrade or Downgrade (Second Step)<a class="headerlink" href="#confirming-upgrade-or-downgrade-second-step" title="Permalink to this headline">¶</a></h2>
<p>The CHRIO may choose to either to confirm or cancel a facility upgrade
or downgrade.</p>
<p>To confirm a facility upgrade/downgrade <tt class="docutils literal"><span class="pre">PATCH</span></tt>
<tt class="docutils literal"><span class="pre">api/facilities/facility_upgrade/&lt;id&gt;/</span></tt> where the <tt class="docutils literal"><span class="pre">id</span></tt> identifies a particular
facility upgrade/downgrade.</p>
<p>For example to confirm the facility upgrade done above do a <tt class="docutils literal"><span class="pre">PATCH</span></tt> to
<tt class="docutils literal"><span class="pre">api/facilities/facility_upgrade/70610b2b-ddd8-49b4-8594-52c236a834d2</span></tt>
with the payload below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;is_confirmed&quot;</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Expected Response data:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;70610b2b-ddd8-49b4-8594-52c236a834d2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T15:37:56.240505Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T15:37:56.240522Z&quot;</span><span class="p">,</span>
    <span class="s2">&quot;deleted&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;active&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;search&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;reason&quot;</span><span class="o">:</span> <span class="s2">&quot;A good reason for the upgrade&quot;</span><span class="p">,</span>
    <span class="s2">&quot;is_confirmed&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;is_cancelled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;created_by&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;updated_by&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;facility&quot;</span><span class="o">:</span> <span class="s2">&quot;cc585b49-dc42-47a3-a08a-7f2c39633393&quot;</span><span class="p">,</span>
    <span class="s2">&quot;facility_type&quot;</span><span class="o">:</span> <span class="s2">&quot;57a0351b-accd-4ccf-b19f-38920ea78e75&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Expected HTTP Response code</dt>
<dd><tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt></dd>
</dl>
</div>
<div class="section" id="cancelling-a-facility-upgrade-downgrade-second-step">
<h2>Cancelling a facility upgrade/downgrade(Second Step)<a class="headerlink" href="#cancelling-a-facility-upgrade-downgrade-second-step" title="Permalink to this headline">¶</a></h2>
<p>Cancelling a facility upgrade or downgrade is very similar to confirming a
facility upgrade with a minor change
in the payload sent.</p>
<p>Do a <tt class="docutils literal"><span class="pre">PATCH</span></tt>  to the url <tt class="docutils literal"><span class="pre">api/facilities/facility_upgrade/&lt;id&gt;/</span></tt>
with a payload similar to the one shown below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;is_cancelled&quot;</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is after the confirmation of a facility upgrade or downgrade that a facility
is deemed to have been upgraded or downgraded and the changes reflected in
the facility.</p>
</div>
</div>
<div class="section" id="listing-facilities-that-are-due-for-upgrade-downgrade-confirmation">
<h2>Listing Facilities that are due for upgrade/downgrade Confirmation<a class="headerlink" href="#listing-facilities-that-are-due-for-upgrade-downgrade-confirmation" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">/api/facilities/facility_upgrade/?is_confirmed=false</span></tt></p>
<p>Sample Response data:</p>
<div class="highlight-javascript"><div class="highlight"><pre>    <span class="p">{</span>
        <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;next&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="s2">&quot;previous&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="s2">&quot;results&quot;</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;70610b2b-ddd8-49b4-8594-52c236a834d2&quot;</span><span class="p">,</span>
                <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T15:37:56.240505Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T15:37:56.240522Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;deleted&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="s2">&quot;active&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="s2">&quot;search&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
                <span class="s2">&quot;reason&quot;</span><span class="o">:</span> <span class="s2">&quot;A good reason for the upgrade&quot;</span><span class="p">,</span>
                <span class="s2">&quot;is_confirmed&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="s2">&quot;is_cancelled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="s2">&quot;created_by&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
                <span class="s2">&quot;updated_by&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
                <span class="s2">&quot;facility&quot;</span><span class="o">:</span> <span class="s2">&quot;cc585b49-dc42-47a3-a08a-7f2c39633393&quot;</span><span class="p">,</span>
                <span class="s2">&quot;facility_type&quot;</span><span class="o">:</span> <span class="s2">&quot;57a0351b-accd-4ccf-b19f-38920ea78e75&quot;</span>
            <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Expected Response code:</dt>
<dd><tt class="docutils literal"><span class="pre">HTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt></dd>
</dl>
<p>Listing all the facilties whose upgrades and downgrades have been declined:
<tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">/api/facilities/facility_upgrade/?is_cacelled=true</span></tt></p>
<p>The resulting payload and expected response code are similar the ones above</p>
</div>
<div class="section" id="listing-all-the-the-upgrades-downgrades-of-a-facility">
<h2>Listing all the the Upgrades/Downgrades of a facility<a class="headerlink" href="#listing-all-the-the-upgrades-downgrades-of-a-facility" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">GET</span></tt> the URL <tt class="docutils literal"><span class="pre">/api/facilities/facility_upgrade/?facility=&lt;id&gt;</span></tt></p>
<p>For example a get to the URL
<tt class="docutils literal"><span class="pre">api/facilities/facility_upgrade/?facility=cc585b49-dc42-47a3-a08a-7f2c3963339311</span></tt>
results in the data shown below and the a response code of <tt class="docutils literal"><span class="pre">HTTTP</span> <span class="pre">200</span> <span class="pre">OK</span></tt></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;next&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;previous&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;results&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;70610b2b-ddd8-49b4-8594-52c236a834d2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T15:37:56.240505Z&quot;</span><span class="p">,</span>
            <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-05-21T15:37:56.240522Z&quot;</span><span class="p">,</span>
            <span class="s2">&quot;deleted&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="s2">&quot;active&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s2">&quot;search&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;reason&quot;</span><span class="o">:</span> <span class="s2">&quot;A good reason for the upgrade&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is_confirmed&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s2">&quot;is_cancelled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s2">&quot;created_by&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;updated_by&quot;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;facility&quot;</span><span class="o">:</span> <span class="s2">&quot;cc585b49-dc42-47a3-a08a-7f2c39633393&quot;</span><span class="p">,</span>
            <span class="s2">&quot;facility_type&quot;</span><span class="o">:</span> <span class="s2">&quot;57a0351b-accd-4ccf-b19f-38920ea78e75&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2015, sci devs.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>